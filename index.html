<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResenhaTale ðŸ‘€</title>
    <style>
        @font-face {
            font-family: 'Determination';
            src: url('https://fonts.cdnfonts.com/s/15443/DeterminationMonoWebRegular.woff') format('woff');
        }

        body {
            background-color: black;
            color: white;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        /* Inimigo */
        #enemy-container {
            height: 180px;
            text-align: center;
            margin-bottom: 20px;
        }

        #enemy-img {
            width: 120px;
            animation: shake 0.5s infinite alternate;
        }

        @keyframes shake {
            from { transform: translateX(-5px); }
            to { transform: translateX(5px); }
        }

        /* Caixa de Batalha */
        #box {
            width: 400px;
            height: 160px;
            border: 5px solid white;
            position: relative;
            background: black;
            padding: 15px;
            box-sizing: border-box;
            overflow: hidden;
        }

        /* A Alma (CoraÃ§Ã£o) */
        #soul {
            position: absolute;
            width: 16px;
            height: 16px;
            display: none;
            z-index: 100;
        }

        /* ProjÃ©til do Ataque */
        .bullet {
            position: absolute;
            background: white;
            width: 10px;
            height: 10px;
        }

        /* Status Bar */
        #status {
            width: 400px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-weight: bold;
        }

        .hp-bar-bg { width: 100px; height: 18px; background: red; margin: 0 10px; }
        #hp-fill { width: 100%; height: 100%; background: #ffff00; transition: 0.2s; }

        /* BotÃµes de Menu */
        .buttons {
            display: flex;
            gap: 10px;
            width: 410px;
            justify-content: space-between;
        }

        .btn {
            border: 2px solid #e27d31;
            color: #e27d31;
            padding: 8px;
            width: 90px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
        }

        .btn.active { border-color: white; color: white; background: #e27d31; }

        #dialogue { font-size: 18px; line-height: 1.4; }
    </style>
</head>
<body>

    <div id="enemy-container">
        <img src="resenha.png" id="enemy-img" alt="ðŸ‘€" onerror="this.src='https://emojicdn.elk.sh/ðŸ‘€?size=120'">
        <p>Inimigo: Resenha ðŸ‘€</p>
    </div>

    <div id="box">
        <div id="dialogue"></div>
        <img id="soul" src="https://i.imgur.com/u7f3RCH.png" alt="â¤ï¸">
    </div>

    <div id="status">
        PLAYER  LV 19  HP <div class="hp-bar-bg"><div id="hp-fill"></div></div> <span id="hp-text">20 / 20</span>
    </div>

    <div class="buttons">
        <div class="btn" onclick="playerAction('fight')">LUTAR</div>
        <div class="btn" onclick="playerAction('act')">AGIR</div>
        <div class="btn" onclick="playerAction('item')">ITEM</div>
        <div class="btn" onclick="playerAction('mercy')">POUPAR</div>
    </div>

    <script>
        const box = document.getElementById('box');
        const dialogue = document.getElementById('dialogue');
        const soul = document.getElementById('soul');
        const hpFill = document.getElementById('hp-fill');
        const hpText = document.getElementById('hp-text');

        let hp = 20;
        let maxHp = 20;
        let gameState = 'menu'; // menu, attacking, enemyTurn
        let soulX = 192, soulY = 72;
        let keys = {};

        // Sons/Efeitos simples de diÃ¡logo
        function typeWriter(text) {
            dialogue.innerHTML = "";
            let i = 0;
            gameState = 'typing';
            const interval = setInterval(() => {
                dialogue.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
                i++;
                if (i >= text.length) {
                    clearInterval(interval);
                    gameState = 'menu';
                }
            }, 30);
        }

        typeWriter("* O ar estÃ¡ pesado...\n* A resenha comeÃ§ou.");

        function playerAction(type) {
            if (gameState !== 'menu') return;

            if (type === 'fight') {
                typeWriter("* VocÃª ataca! Mas a resenha Ã© forte demais...");
                setTimeout(startEnemyTurn, 2000);
            } else if (type === 'act') {
                typeWriter("* VocÃª contou uma piada.\n* A resenha achou graÃ§a.");
                setTimeout(startEnemyTurn, 2000);
            } else {
                typeWriter("* NÃ£o Ã© hora de usar isso!");
            }
        }

        function startEnemyTurn() {
            gameState = 'enemyTurn';
            dialogue.innerHTML = "";
            soul.style.display = 'block';
            soulX = 192; soulY = 72;
            updateSoulPos();

            // Criar projÃ©teis
            let attackCount = 0;
            const attackInterval = setInterval(() => {
                createBullet();
                attackCount++;
                if (attackCount > 15) {
                    clearInterval(attackInterval);
                    setTimeout(endEnemyTurn, 2000);
                }
            }, 400);
        }

        function endEnemyTurn() {
            gameState = 'menu';
            soul.style.display = 'none';
            typeWriter("* Resenha ðŸ‘€ parece estar te observando.");
        }

        // MovimentaÃ§Ã£o da Alma
        window.addEventListener('keydown', e => keys[e.key] = true);
        window.addEventListener('keyup', e => keys[e.key] = false);

        function updateSoulPos() {
            if (gameState !== 'enemyTurn') return;
            const speed = 3;
            if (keys['ArrowUp'] || keys['w']) soulY -= speed;
            if (keys['ArrowDown'] || keys['s']) soulY += speed;
            if (keys['ArrowLeft'] || keys['a']) soulX -= speed;
            if (keys['ArrowRight'] || keys['d']) soulX += speed;

            // Limites da caixa
            soulX = Math.max(5, Math.min(375, soulX));
            soulY = Math.max(5, Math.min(135, soulY));

            soul.style.left = soulX + 'px';
            soul.style.top = soulY + 'px';
            requestAnimationFrame(updateSoulPos);
        }

        function createBullet() {
            if (gameState !== 'enemyTurn') return;
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            let bX = Math.random() * 380;
            let bY = 0;
            bullet.style.left = bX + 'px';
            box.appendChild(bullet);

            const bInt = setInterval(() => {
                bY += 4;
                bullet.style.top = bY + 'px';

                // ColisÃ£o
                let dist = Math.hypot((bX - soulX), (bY - soulY));
                if (dist < 15) {
                    takeDamage();
                    bullet.remove();
                    clearInterval(bInt);
                }

                if (bY > 160) {
                    bullet.remove();
                    clearInterval(bInt);
                }
            }, 20);
        }

        function takeDamage() {
            hp -= 1;
            if (hp < 0) hp = 0;
            hpFill.style.width = (hp / maxHp * 100) + '%';
            hpText.innerText = hp + " / " + maxHp;
            if (hp <= 0) {
                alert("GAME OVER - A resenha te consumiu.");
                location.reload();
            }
        }

        requestAnimationFrame(updateSoulPos);
    </script>
</body>
</html>
